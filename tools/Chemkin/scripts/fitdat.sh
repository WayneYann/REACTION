#!/bin/sh
# to execute:  fitdat.sh myrun &
# nqs batch mode:  qsub -q queuename -lt time(seconds) fitdat.sh

sh 1> ${1}.log 2>&1 << ENDSH

set -x

#cd /scr/$LOGNAME              #go to user's scratch directory
#mkdir "${1}$$"                #make subdirectory /myrun##
#cd "${1}$$"                   #go to /myrun##

cat << EOF > makefile

include chemmake.h

OBJS = fitdat.o lsei.o xerror.o math.o $(MACH)
fitdat.exe : $(OBJS)
	   $(LINK) fitdat.exe $(OBJS)

EOF

cat << EOF > fitdat.inp
C2H
C  2
H  1
**
1000.
127.0
 300.000   8.885     49.608      .016
 400.000   9.655     52.276      .946
 500.000  10.234     54.495     1.941
 600.000  10.716     56.404     2.989
 700.000  11.141     58.089     4.082
 800.000  11.523     59.602     5.216
 900.000  11.867     60.979     6.386
1000.000  12.176     62.246     7.588
1100.000  12.453     63.420     8.820
1200.000  12.701     64.514    10.078
1300.000  12.925     65.540    11.359
1400.000  13.129     66.505    12.662
1500.000  13.317     67.417    13.985
1600.000  13.492     68.282    15.325
1700.000  13.656     69.105    16.683
1800.000  13.813     69.890    18.056
1900.000  13.964     70.641    19.445
2000.000  14.109     71.361    20.549
2100.000  14.250     72.053    22.267
2200.000  14.386     72.719    23.698
2300.000  14.519     73.362    25.144
2400.000  14.648     73.982    26.602
2500.000  14.773     74.583    25.073
2600.000  14.893     75.165    29.557
2700.000  15.008     75.729    31.052
2800.000  15.119     76.277    32.558
2900.000  15.224     76.809    34.075
3000.000  15.324     77.327    35.603
3100.000  15.418     77.831    37.140
3200.000  15.506     78.322    38.686
3300.000  15.589     78.800    40.241
3400.000  15.665     79.267    41.804
3500.000  15.736     79.722    43.374
3600.000  15.801     80.166    44.951
3700.000  15.861     80.600    46.534
3800.000  15.915     81.023    48.123
3900.000  15.963     81.348    49.716
4000.000  16.007     81.842    51.315
4100.000  16.046     82.238    52.918
4200.000  16.080     82.625    54.524
4300.000  16.110     83.004    56.134
4400.000  16.136     83.374    57.746
4500.000  16.158     83.737    59.361
4600.000  16.177     84.093    60.976
4700.000  16.192     84.441    62.596
4800.000  16.203     84.782    64.216
4900.000  16.212     85.116    65.837
5000.000  16.219     85.444    67.458
0 0 0 0
EOF

touch makefile; make fitdat.exe; fitdat.exe < fitdat.inp > fitdat.out

ENDSH
